route:
  receiver: staging-default
  group_wait: 15s
  group_interval: 2m
  repeat_interval: 1h
  routes:
    - matchers:
        - severity="critical"
      receiver: staging-slack

receivers:
  - name: staging-default
  - name: staging-slack
    slack_configs:
      - api_url: 'https://hooks.slack.com/services/REPLACE/STAGING/WEBHOOK'
        channel: '#staging-alerts'
        username: 'prometheus-staging'
        title: '{{ .CommonAnnotations.summary }}'
        text: >-
          *Staging* \n*Status:* {{ .Status }}\n{{ range .Alerts }}â€¢ {{ .Labels.alertname }} ({{ .Labels.severity }})\n{{ end }}

inhibit_rules:
  - source_match:
      severity: 'critical'
    target_match:
      severity: 'info'
    equal: ['alertname']