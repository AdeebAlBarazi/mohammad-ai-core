global:
  scrape_interval: 15s
  evaluation_interval: 15s

alerting:
  alertmanagers:
    - static_configs:
        - targets: ['alertmanager:9093']

rule_files:
  - /etc/prometheus/rules/rules-market.yml
  - /etc/prometheus/rules/rules-slo.yml
  - /etc/prometheus/rules/rules-search-payment.yml

scrape_configs:
  # Marketplace service (choose target depends on where app runs)
  - job_name: 'market'
    metrics_path: /metrics
    static_configs:
      # If app runs inside same docker network as this compose, use the service name
      - targets: ['app:3002']
      # If app runs on host (outside Docker), use host.docker.internal
      - targets: ['host.docker.internal:3002']

  # Auth service
  - job_name: 'auth'
    metrics_path: /metrics
    static_configs:
      - targets: ['host.docker.internal:4100']
      # If auth runs as a service in docker network, you can also add: 'auth:4100'
      # - targets: ['auth:4100']

  # Node exporter (server metrics)
  - job_name: 'node'
    static_configs:
      - targets: ['node-exporter:9100']
      # If running a node exporter on host, also consider:
      # - targets: ['host.docker.internal:9100']

  # MongoDB exporter
  - job_name: 'mongodb'
    static_configs:
      - targets: ['mongodb-exporter:9216']
