# Marketplace service environment template
MARKET_PORT=3002
MARKET_DB=mongo
# Primary Mongo connection string used by the app
MARKET_MONGO_URL=mongodb://localhost:27017/axiom_market
# (Deprecated) legacy variable, not used by connect.js but kept for reference
MONGODB_URI=
MARKET_VERSION=2025.11.0
SLOW_QUERY_MS=300
RATE_LIMIT=120
RATE_WINDOW_MS=60000
MARKET_LIMIT_MAX=100
MARKET_CACHE_TTL_MS=30000
MARKET_CACHE_SIZE=200
MARKET_CACHE_BACKEND=memory
ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000
# Preferred explicit origins (override ALLOWED_ORIGINS when set)
FRONTEND_ORIGIN=
ADMIN_ORIGIN=
ALLOWED_CURRENCIES=SAR,USD,AED,EUR
MEDIA_SIGNING_ENABLED=1
MEDIA_SIGN_TTL_SECONDS=3600
MEDIA_THUMBS_ENABLED=1
MARKET_MEDIA_MAX_BYTES=5242880
MEDIA_ALLOWED_TYPES=image/jpeg,image/png,image/webp
# Media storage configuration
MEDIA_BACKEND=local
MEDIA_LOCAL_DIR=
MEDIA_LOCAL_URL_BASE=/uploads/product-media
MEDIA_S3_BUCKET=
MEDIA_S3_REGION=
MEDIA_PUBLIC_BASE_URL=
# CSP/CDN configuration
SCRIPT_SRC_ORIGINS=
STYLE_SRC_ORIGINS=
CSP_IMG_ALLOW_BLOB=0
CSP_IMG_EXTRA_ORIGINS=
JWT_SECRET=change_me_market_secret
JWT_PRIVATE_KEY_PATH=
JWT_PUBLIC_KEY_PATH=
JWT_PUBLIC_KEY=
JWT_ACTIVE_KID=
JWT_PUBLIC_KEYS_JSON=
JWT_PRIVATE_KEYS_JSON=
JWT_SECRETS_MANAGER_NAME=
JWT_SECRETS_MANAGER_ARN=
JWT_KID=
TOKEN_EXPIRES_IN=1h
LOG_LEVEL=info
MARKET_REDIRECT_TO_V1=0
AUTH_JWKS_URL=
JWKS_CACHE_TTL_MS=3600000
JWKS_AUTO_REFRESH_MS=0
JWKS_AUTO_REFRESH_JITTER_MS=0
## Security headers and HTTPS
ENABLE_CSP=1
FORCE_HTTPS=0
HSTS_MAX_AGE_SECONDS=15552000
TRUST_PROXY_HOPS=1
## Rate limit (global and per-upload)
RATE_LIMIT_MAX=120
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_UPLOAD_MAX=30
RATE_LIMIT_CART_MAX=60
RATE_LIMIT_ORDERS_MAX=30
## Metrics
METRICS_ENABLED=1
METRICS_PREFIX=market_
METRICS_BUCKETS=0.05,0.1,0.3,0.5,1,2,3,5
## Dev CORS convenience
MARKET_CORS_ALLOW_DEV=1

# --- AI Assistant (optional) ---
# Uncomment and set your OpenAI key to enable real responses
# OPENAI_API_KEY=sk-...
AI_MODEL=gpt-4.1-mini
AI_MAX_INFLIGHT=4
AI_PROFILE_PATH=./agent-core/profile.json
AI_MEMORY_DIR=./agent-core/memory/sessions
